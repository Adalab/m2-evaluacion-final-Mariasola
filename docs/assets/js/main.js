"use strict";const input=document.querySelector(".search-input"),btn=document.querySelector(".search-button"),result=document.querySelector(".series-container"),fav=document.querySelector(".fav-choose");let favList=[],list=[];const getSavedFavsFromLocalStorage=JSON.parse(localStorage.getItem("userFavs")),setFavsIntoLocalStorage=()=>{localStorage.setItem("userFavs",JSON.stringify(favList))},getDatafromApi=e=>{e.preventDefault(),fetch(`http://api.tvmaze.com/search/shows?q=${input.value}`).then(e=>e.json()).then(e=>{e.length>0?(list=e,paintSeries(e)):result.innerHTML="No hay resultados para esta bÃºsqueda"})},paintSeries=e=>{result.innerHTML="";for(let t=0;t<e.length;t++){const a=e[t].show.name,s=e[t].show.image,n=e[t].show.id,o=document.createElement("div");o.classList.add("show-container");const c=document.createElement("h4");c.classList.add("name-show");const i=document.createElement("img");i.classList.add("img-show");const l=document.createElement("p");l.classList.add("id-show");const d=document.createTextNode(n),r=document.createTextNode(a);i.src=null===s?"https://via.placeholder.com/210x295/ffffff/666666/?text=TV":s.medium||s.original,result.appendChild(o),o.appendChild(i),o.appendChild(c),o.appendChild(l),c.appendChild(r),l.appendChild(d),o.addEventListener("click",pickAsFav)}},clearFav=()=>{fav.innerHTML=""},paintFav=()=>{fav.innerHTML="";const e=document.createElement("ul");e.classList.add("fav-list"),fav.appendChild(e);for(let t of favList){const a=t.img,s=t.name,n=t.id,o=document.createElement("li");o.classList.add("fav-box-show");const c=document.createElement("h3");c.classList.add("fav-name-show");const i=document.createElement("img");i.classList.add("fav-img-show");const l=document.createElement("div");l.classList.add("fav-delete");const d=document.createElement("div");d.classList.add("fav-id-show");const r=document.createTextNode(n),v=document.createTextNode(s);i.src=a,e.appendChild(o),o.appendChild(i),o.appendChild(c),o.appendChild(d),o.appendChild(l),c.appendChild(v),d.appendChild(r),l.addEventListener("click",deleteFav)}const t=document.querySelector(".fav-deleteAll");favList.length>1?(t.classList.remove("hidden"),t.classList.add("fav-deleteAll-show")):t.classList.add("hidden"),t.addEventListener("click",deleteAll)};function deleteAll(){favList=[],paintFav()}function deleteFav(e){const t=e.currentTarget.parentElement,a=t.querySelector(".fav-img-show"),s=t.querySelector(".fav-name-show"),n=t.querySelector(".fav-id-show"),o=(a.src,s.innerHTML,n.innerHTML);for(let e=0;e<favList.length;e++)favList[e].id===o&&favList.splice(e,1);setFavsIntoLocalStorage(),paintFav()}const pickAsFav=e=>{const t=e.currentTarget;t.classList.toggle("fav-show");const a=t.querySelector(".img-show"),s=t.querySelector(".name-show"),n=t.querySelector(".id-show"),o={img:a.src,name:s.innerHTML,id:n.innerHTML};t.classList.contains("fav-show")&&favList.push(o),setFavsIntoLocalStorage(),paintFav()},getFromLocalStorage=()=>{null!==getSavedFavsFromLocalStorage?(favList=getSavedFavsFromLocalStorage,paintFav()):favList=[]};null!==getSavedFavsFromLocalStorage?(favList=getSavedFavsFromLocalStorage,paintFav()):favList=[],btn.addEventListener("click",getDatafromApi);